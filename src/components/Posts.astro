---

import { getCollection } from 'astro:content';
import Card from './Card.astro';
import LinkButton from './LinkButton.astro';

const posts = await getCollection('posts');

// Ordenar los posts por fecha de manera descendente
const sortedPosts = posts.sort((a, b) => new Date(b.data.date) - new Date(a.data.date));

// Obtener solo las dos últimas publicaciones ya ordenadas por fecha
const latestPosts = sortedPosts.slice(0, 3);
---

<div class="flex flex-col gap-y-16">
    <div class={`flex ${latestPosts.length < 3 ? 'justify-center' : 'md:flex-row'} gap-y-8 md:gap-x-8`}>
        {latestPosts.map(post => ( 
            <article class="flex flex-col space-y-8 group">
                <Card
                    href={`/newsletter/${post.slug}`}
                    title={post.data.title}
                    body={post.data.description}
                    image={post.data.image}
                />
            </article>
        ))}
    </div>

    <div class="flex justify-center">
        <LinkButton href="/newsletter">
            Ver más
        </LinkButton>
    </div>
</div>



