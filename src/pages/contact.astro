<form class="space-y-8" id="contact-form" method="POST" name="formularioContacto">
  <input type="hidden" name="form-name" value="formularioContacto">
  
  <!-- Nombre -->
  <div>
      <label for="name" class="block mb-2 text-lg text-accent font-mono font-black">Tu nombre:</label>
      <input type="text" id="name" name="name" class="block p-2.5 w-full text-sm text-neutral placeholder-neutral/60 bg-primary/20 rounded-lg shadow-sm border border-primary focus:ring-primary focus:border-primary" placeholder="John Doe" required />
  </div>

  <!-- Correo -->
  <div>
      <label for="email" class="block mb-2 text-lg text-accent font-mono font-black">Correo electrónico:</label>
      <input type="email" id="email" name="email" class="block p-2.5 w-full text-sm text-neutral placeholder-neutral/60 bg-primary/20 placeholder:marker:rounded-lg shadow-sm border border-primary focus:ring-primary focus:border-primary" placeholder="john@doe.com" required />
  </div>

  <!-- Asunto -->
  <div>
      <label for="subject" class="block mb-2 text-lg text-accent font-mono font-black">Asunto:</label>
      <input type="text" id="subject" name="subject" class="block p-2.5 w-full text-sm text-neutral placeholder-neutral/60 bg-primary/20 rounded-lg shadow-sm border border-primary focus:ring-primary focus:border-primary" placeholder="Escribe aquí tu asunto..." required />
  </div>

  <!-- Mensaje -->
  <div class="sm:col-span-2">
      <label for="message" class="block mb-2 text-lg text-accent font-mono font-black">Mensaje:</label>
      <textarea id="message" name="message" rows="6" class="block p-2.5 w-full text-sm text-neutral placeholder-neutral/60 bg-primary/20 rounded-lg shadow-sm border border-primary focus:ring-primary focus:border-primary" placeholder="Escribe aquí tu mensaje..." required></textarea>
  </div>

  <!-- reCAPTCHA -->
  <div>
      <script src="https://www.google.com/recaptcha/api.js"></script>
      <div class="g-recaptcha" data-sitekey="6LdAvUIUAAAAAHjrjmjtNTcXyKm0WKwefLp-dQv9"></div>
  </div>

  <!-- Botón de enviar -->
  <button type="submit" class="btn btn-primary flex items-center space-x-2">
      Enviar
      <svg width="1em" height="1em" viewBox="0 0 24 24" class="w-6 h-6" data-icon="pixelarticons:mail-arrow-right">
          <path fill="currentColor" d="M20 4H2v16h10v-2H4V6h16v6h2V4zM6 8h2v2H6zm4 4H8v-2h2zm4 0v2h-4v-2zm2-2v2h-2v-2zm0 0V8h2v2zm8 8h-2v-2h-2v-2h-2v2h2v2h-6v2h6v2h-2v2h2v-2h2v-2h2z"></path>
      </svg>
  </button>
</form>

<!-- Notificaciones -->
<div id="notification" class="notification"></div>

<script>
  document.getElementById('contact-form').addEventListener('submit', async function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const subject = document.getElementById('subject').value;
      const message = document.getElementById('message').value;

      try {
          const response = await fetch('/api/contact', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json',
              },
              body: JSON.stringify({ name, email, subject, message }),
          });

          if (response.ok) {
              const data = await response.json();
              showNotification('Correo enviado: ' + data.message, 'success');
          } else {
              showNotification('Error al enviar el correo', 'error');
          }
      } catch (error) {
          console.error('Error:', error);
          showNotification('Error al enviar el correo', 'error');
      }
  });

  // Función para mostrar la notificación
  function showNotification(message, type) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.remove('success', 'error');
      notification.classList.add(type === 'success' ? 'success' : 'error');
      notification.style.display = 'block';

      setTimeout(() => {
          notification.style.display = 'none';
      }, 5000);
  }
</script>
