<form id="contact-form" class="form-container">
  <label for="name">Tu nombre:</label>
  <input type="text" id="name" name="name" required />

  <label for="email">Tu correo:</label>
  <input type="email" id="email" name="email" required />

  <label for="subject">Asunto:</label>
  <input type="text" id="subject" name="subject" required />

  <label for="message">Mensaje:</label>
  <textarea id="message" name="message" required></textarea>

  <button type="submit">Enviar</button>
</form>

<!-- Contenedor para mostrar las notificaciones -->
<div id="notification" class="notification"></div>

<script>
  document.getElementById('contact-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const subject = document.getElementById('subject').value;
    const message = document.getElementById('message').value;

    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ name, email, subject, message }),
      });

      if (response.ok) {
        const data = await response.json();
        showNotification('Correo enviado: ' + data.message, 'success');
      } else {
        showNotification('Error al enviar el correo', 'error');
      }
    } catch (error) {
      console.error('Error:', error);
      showNotification('Error al enviar el correo', 'error');
    }
  });

  // Función para mostrar la notificación
  function showNotification(message, type) {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.classList.remove('success', 'error');
    notification.classList.add(type === 'success' ? 'success' : 'error');
    notification.style.display = 'block';

    setTimeout(() => {
      notification.style.display = 'none';
    }, 5000);
  }
</script>
